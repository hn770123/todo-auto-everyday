# 📝 Everyday Todo

文房具のような温かみのあるデザインの、毎日のタスク管理アプリケーションです。

## ✨ 特徴

- **4ページ構成**: Todo表示、ログ、設定、データ管理の各ページが独立
- **時間帯別Todo**: カスタマイズ可能な時間帯でTodoを管理(デフォルト: 朝・帰宅後・寝る前)
- **単発Todo**: 繰り返しではない、期間指定のTodoを作成可能
- **継続日数機能**: 曜日+継続日数で、期間中チェック状態を維持
- **ドラッグ&ドロップ**: Todoを自由に並び替え可能
- **曜日設定**: 各Todoを表示する曜日を個別に設定
- **チェック音**: チェック/アンチェック時に心地よい音を再生
- **ログ記録**: チェック/アンチェックのアクション履歴を最新100件まで記録
- **Discord通知**: Todoの完了をDiscordに自動投稿
- **データ管理**: JSONエクスポート/インポート機能
- **ダークモード**: 目に優しいダークテーマ
- **iPhone最適化**: iOS 9.3.5以降で動作、ヒラギノ丸ゴフォント使用

## 🎯 使い方

### Todoページ (todo.html)

- 現在の時間帯に応じたTodoが自動表示されます
- チェックボックスをクリックしてTodoを完了/未完了に切り替え
- チェック時に上昇音、アンチェック時に下降音が鳴ります
- ドラッグ&ドロップでTodoの順番を入れ替え
- 未完了と完了済みが自動的に分類されます

**デフォルト時間帯**:
- **朝** (04:00 - 12:00): おはようございますの時間帯
- **帰宅後** (12:00 - 19:00): おかえりなさいの時間帯
- **寝る前** (19:00 - 04:00): おやすみなさいの時間帯

### ログページ (log.html)

- Todoのチェック/アンチェックのアクション履歴を表示
- 最新100件まで自動保存
- 時間帯別に色分け表示
- ログのクリアが可能

### 設定ページ (config.html)

#### Discord通知設定
1. DiscordチャンネルのWebhook URLを取得
2. URLと投稿者名を入力
3. 「Discord設定を保存」をクリック
4. 「テスト送信」で動作確認

#### 時間帯設定
- 各時間帯の開始時刻と終了時刻をカスタマイズ可能
- 朝/帰宅後/寝る前の3つの時間帯をプリセットとして提供
- 「デフォルトに戻す」でプリセットに復元可能

#### Todo管理
- 各時間帯のTodoを追加・削除
- ↑↓ボタンでTodoの順序を変更
- 曜日ボタンで各Todoの表示曜日を設定
- **継続日数**: 0〜6日を設定可能
  - 例: 月曜日+継続1日 = 月曜日にチェックすると火曜日まで済のまま
  - 例: 土曜日+継続2日 = 土曜日にチェックすると月曜日まで済のまま

#### データ管理
- 「すべてのデータをリセット」で初期状態に戻せます

### データ管理ページ (data.html)

#### エクスポート
- すべてのデータをJSON形式でダウンロード
- JSONをクリップボードにコピー

#### インポート
- JSON形式のデータを貼り付けてインポート
- ファイルからインポート
- インポート前に検証機能あり

## 💾 データ保存

すべてのデータはブラウザのローカルストレージに保存されます。

- **繰り返しTodoデータ**: `everyday_todo_data_v3`
- **単発Todoデータ**: `everyday_todo_onetime_v1`
- **ログデータ**: `everyday_todo_logs_v1` (最新100件)
- **設定データ**: `everyday_todo_config_v2`
- **時間帯設定**: `everyday_todo_time_periods_v1`

## 🔧 技術仕様

- **HTML5**: セマンティックマークアップ
- **CSS3**: ダークモード文房具風カスタムデザイン
- **Vanilla JavaScript**: フレームワーク不使用
- **Web Audio API**: チェック音の生成・再生
- **ES5+ Polyfills**: iOS 9対応のためpolyfills.jsを使用
- **Local Storage**: クライアントサイドデータ保存
- **Discord Webhook API**: 通知機能

### iOS 9.3.5対応

iOS 9.3.5などの古いブラウザでも動作するように、以下のpolyfillsを実装しています:

- **String.prototype.padStart** (ES2017)
- **String.prototype.repeat** (ES2015)
- **Array.prototype.find** (ES2015)
- **Array.prototype.findIndex** (ES2015)
- **Array.prototype.includes** (ES2016)
- **Array.from** (ES2015)

これにより、iOS 9以降のすべてのデバイスで正常に動作します。

### フォント

- **ヒラギノ丸ゴ ProN W4**: iPhoneに標準搭載されている丸ゴシック体
- フォールバック: ヒラギノ角ゴ ProN、sans-serif

## 📱 ブラウザ対応

- Chrome / Edge (最新版)
- Safari (iOS 9.3.5+)
- Firefox (最新版)

## 🚀 セットアップ

1. すべてのファイルを同じディレクトリに配置
2. ブラウザで `index.html` または `todo.html` を開く
3. 初回起動時にサンプルデータが自動作成されます

## 📂 ファイル構成

```
.
├── index.html      # リダイレクトページ
├── todo.html       # Todoメインページ
├── log.html        # ログページ
├── config.html     # 設定ページ
├── data.html       # データ管理ページ
├── common.css      # 共通スタイル
├── todo.css        # Todoページスタイル
├── log.css         # ログページスタイル
├── config.css      # 設定ページスタイル
├── polyfills.js    # iOS 9対応polyfills
├── utils.js        # 共通ユーティリティ
├── todo.js         # Todoページロジック
├── log.js          # ログページロジック
├── config.js       # 設定ページロジック
├── data.js         # データ管理ページロジック
├── init.js         # 初期データ作成
└── README.md       # このファイル
```

## ⚙️ カスタマイズ

### 時間帯の変更

設定ページから時間帯をカスタマイズできます。または、`utils.js` の `DEFAULT_TIME_RANGES` オブジェクトを編集してデフォルト値を変更できます:

```javascript
var DEFAULT_TIME_RANGES = {
    morning: { id: 'morning', start: 4, end: 12, label: '朝', greeting: 'おはようございます', emoji: '🌅' },
    afterSchool: { id: 'afterSchool', start: 12, end: 19, label: '帰宅後', greeting: 'おかえりなさい', emoji: '🏠' },
    night: { id: 'night', start: 19, end: 4, label: '寝る前', greeting: 'おやすみなさい', emoji: '🌙' }
};
```

### デザインの変更

`common.css` の CSS変数を編集:

```css
:root {
    --paper-white: #2a2a2a;
    --ink-black: #e0e0e0;
    --accent-blue: #5c9ded;
    /* ... */
}
```

## 🎵 チェック音

Web Audio APIを使用して、チェック時とアンチェック時に異なる音を再生します:

- **チェック音**: 800Hz → 1200Hzの上昇音
- **アンチェック音**: 600Hz → 400Hzの下降音

## 🐛 トラブルシューティング

### Todoが表示されない
- 現在の時刻を確認してください
- 該当する時間帯にTodoが登録されているか確認
- 曜日設定で今日が有効になっているか確認

### Discord通知が送信されない
- Webhook URLが正しいか確認
- ブラウザのコンソールでエラーを確認
- テスト送信で動作確認

### データがリセットされた
- ブラウザのキャッシュクリア時にローカルストレージも削除されます
- データ管理ページからJSONエクスポートして定期的にバックアップすることをおすすめします

### 音が鳴らない
- ブラウザの音量設定を確認
- iOSの場合、サイレントモードを解除
- Web Audio APIに対応していないブラウザでは音が鳴りません

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🙏 謝辞

- ヒラギノフォント
- Emoji icons
- Web Audio API

---

**作成日**: 2025年
**バージョン**: 3.0.0
